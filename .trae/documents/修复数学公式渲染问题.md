## 问题分析

通过分析代码库，我发现了以下几个可能导致数学公式渲染问题的原因：

1. **MathJax版本过旧**：当前使用的是MathJax 2.7.9（2018年发布），可能存在兼容性和性能问题
2. **配置冲突**：存在两个MathJax配置脚本（`mathjax-lazy.js`和`mathjax-config.js`），可能导致重复加载或配置覆盖
3. **懒加载检测逻辑不完善**：`hasMathContent()`函数中的正则表达式可能无法检测所有数学公式模式
4. **pymdownx.arithmatex配置**：设置为`generic: true`但未明确指定渲染器，可能导致渲染不一致
5. **潜在样式问题**：深色模式下的公式颜色可能不够清晰

## 修复计划

### 第一阶段：更新和清理MathJax配置
1. **升级MathJax到最新版本**（建议使用3.x版本，或至少更新到2.7.9以上的版本）
2. **移除冗余配置文件**：删除`mathjax-config.js`，因为它与`mathjax-lazy.js`功能重复
3. **优化懒加载脚本**：改进数学公式检测逻辑，确保能识别所有常见的LaTeX公式模式

### 第二阶段：优化Markdown扩展配置
4. **调整pymdownx.arithmatex配置**：明确指定MathJax作为渲染器，或使用更合适的配置选项
5. **确保与其他扩展兼容**：检查是否有其他扩展影响数学公式渲染

### 第三阶段：样式和性能优化
6. **更新MathJax CSS样式**：确保在深色和浅色模式下都有良好的可读性
7. **优化加载性能**：减少不必要的数学公式检测和加载延迟

### 第四阶段：测试验证
8. **创建全面的测试用例**：在`test_math.md`中添加更多类型的数学公式进行测试
9. **验证修复效果**：运行本地服务器检查数学公式是否正确渲染

## 预期结果

- 数学公式能够正确、快速地渲染
- 在深色和浅色模式下都有良好的视觉效果
- 消除配置冲突和冗余代码
- 提高整体网站性能和用户体验