<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processClass: 'arithmatex',
    ignoreClass: 'tex2jax_ignore'
  },
  'HTML-CSS': {
    scale: 110,
    minScaleAdjust: 50,
    preferredFont: 'TeX',
    availableFonts: ['TeX'],
    webFont: 'TeX',
    imageFont: null,
    styles: {
      '.MathJax_Display': {
        'margin': '1em 0',
        'text-align': 'center'
      }
    }
  },
  SVG: {
    scale: 110,
    minScaleAdjust: 50,
    font: 'TeX'
  }
});

// 监听 MkDocs 页面切换事件
if (typeof document$ !== 'undefined') {
  document$.subscribe(function() {
    MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
  });
}

// 监听页面导航变化（备用方案）
document.addEventListener('DOMContentLoaded', function() {
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.addedNodes.length > 0) {
        MathJax.Hub.Queue(['Typeset', MathJax.Hub]);
      }
    });
  });
  
  // 观察主要内容区域
  const contentArea = document.querySelector('.md-content');
  if (contentArea) {
    observer.observe(contentArea, {
      childList: true,
      subtree: true
    });
  }
});
</script>